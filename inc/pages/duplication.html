<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D-Crypt | Duplication</title>
  <link rel="stylesheet" href="../style.css" />

  <!-- Scripts externes -->
  <script src="../../libsodium.js-master/dist/browsers/sodium.js" defer></script>
  <script src="../script.js" defer></script>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="container">
      <div class="logo">D-Crypt <span class="version">v1.1</span></div>
      <button id="menu-toggle" aria-label="Open menu">☰</button>
      <nav>
        <ul id="menu">
          <li><a href="../../index.html">Encrypt</a></li>
          <li><a href="decrypt.html">Decrypt</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="gen-keys.html">Keys generation</a></li>
          <li><a href="addContact.html">Manage contacts</a></li>
          <li><a href="duplication.html" class="active">Duplicate D-Crypt</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="content">
    <h1>D-Crypt Duplication</h1>

    <p>Follow these steps carefully to duplicate D-Crypt safely:</p>

    <ul class="duplication-steps">
      <li>1. Click <strong>Copy</strong> below, then click <strong>Decrypt now</strong>.</li>
      <li>2. Paste the copied content and decrypt it using the <strong>global key</strong>, then download the ZIP archive.</li>
      <li>3. Make a copy of your entire D-Crypt folder.</li>
      <li>4. In your D-Crypt copy, go to the <strong>inc</strong> folder and delete <code>contacts.js</code> and <code>keys.js</code>.</li>
      <li>5. Extract the downloaded ZIP archive and move the fresh new <code>contacts.js</code> and <code>keys.js</code> files into the <strong>inc</strong> folder of your D-Crypt copy.</li>
      <li>6. Delete the ZIP archive once extraction is complete.</li>
      <li>7. You can now safely share this clean D-Crypt copy (e.g., via a USB drive) without your personal keys or contacts.</li>
    </ul>

    <!-- LOADING -->
    <div id="loading" class="loading-animation">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>

    <!-- COPY AREA -->
    <div id="copyDiv" class="copy-area">
      [zip]gWQg9EZjiLYmydUnq_wM6TjhAq_9SaRj_vd77hNgvD7AnxhlaaCFQvoH3ViiMOAk3NzCMB860ufVVnpZDVgGioi9X6Be9HepQ1TtsCWasogYVQVAAjZ2y-dnMrEZjUgUCbLbEtv7yH-vbyTxSz6eqdWTQPsCqOXVwTfgkrj8zJyJ2BZfzKg91Sk1gcCR7KAwz-YiWXWriQcp7papvGaTeGOB1e85Z_egB8Xq2dcHFkwzWs_BzHRN0u981Y6_AVehToT2SyOwLFg9n5tdVUK3lG9mMEB3_C-y8XgsAIEWGf97n4NDUBRE8-cHJ3Ax3aSg9gshSnDibG2cmuUcEuyF4muULDLT5oPVZRB8Bj5Sfh5UnavgqekxLMS1LVb_5WZTVqmrE6dUhb3eUbZrAp9OuQcBCojzkwHwGi2x9qGUuwXTKSH4sv0deNmFNq8FLywoj3AWmiWmN7z3mN_2XRbyeuRQcURGabhqpVRHttO4Ygi0kTRU33RbOF4EHTzaRpuEGwT4HTr8yFgtzidTGv5QYUv4geNify8Y6oM8PQzToiN4rtDXaP23SrigLnBMjDwEBdzTj69PX_ZMg8IH6WErirAlRlPVGpM2uoHsQOl8X68q6SI4i2BNhIihVXGlPxTj_qZJLVt381C8LErMadn5ZnKWilaJ9rMMxDNEdeBztEmtzDKAx9BqqHy9pdeni6oxmfP-8nD-nz3H-d7UejWR6qx9PuJy9-b64AYa19EwnO9Ks8sJ0re9N-S5hwS1hSHZNZBWk2aXmu3W5uGmd1NjLe6vEbUCYChOL84Jflfd7OEVgMmIrsmr7fPME3RBoj9xR7f88RSys9o_5QMmQgKxeLAg2L5RtVK7hUsu8dOsra5istsTJ4V2JmYZxp3qTuhXALiXw-hZKxDu2bPMrZ5sj809n0pEiWK8xPfG13BfiBVepZvf9LvS4o5rmIaRkqQvLVIT_xSBdjclLTG0eKwKg6xp3_tjGdBp8xseDFDjpwE[/zip]
    </div>

    <!-- ACTION BUTTONS -->
    <button class="copy-btn" onclick="copyContent()">Copy</button>
    <a href="decrypt.html"><button class="copy-btn" style="margin-left:10px;">Decrypt now (global key)</button></a>
  </main>

  <!-- FOOTER -->
  <footer>
    <p>&copy; <span id="current-year"></span> D-Crypt. All rights reserved.</p>
  </footer>

  <!-- SCRIPT -->
  <script>
    /**
     * Copie le contenu complet dans le presse-papier
     */
    function copyContent() {
      const content = document.getElementById('copyDiv').getAttribute('data-fulltext');
      navigator.clipboard.writeText(content).then(function () {
        alert('Content copied to clipboard!');
      }, function (err) {
        alert('Failed to copy: ' + err);
      });
    }

    /**
     * Affiche uniquement les 200 premiers caractères du contenu
     * et stocke le texte complet dans un attribut data-fulltext
     */
    document.addEventListener('DOMContentLoaded', function () {
      const copyDiv = document.getElementById('copyDiv');
      const fullText = copyDiv.innerText.trim();

      copyDiv.setAttribute('data-fulltext', fullText);

      if (fullText.length > 200) {
        copyDiv.innerText = fullText.substring(0, 200) + "...";
      }
    });

    /**
     * Simulation du chargement
     */
    window.addEventListener('load', function () {
      document.getElementById('loading').style.display = 'none';
    });

    /**
     * Mettre à jour l'année automatiquement dans le footer
     */
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('current-year').textContent = new Date().getFullYear();
    });
  </script>
</body>
</html>